{"ast":null,"code":"import _regeneratorRuntime from\"/home/shashikant/Desktop/notezipper-master/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/shashikant/Desktop/notezipper-master/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/shashikant/Desktop/notezipper-master/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import MainScreen from\"../../components/MainScreen\";import axios from\"axios\";import{Button,Card,Form}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{deleteNoteAction,updateNoteAction}from\"../../actions/notesActions\";import ErrorMessage from\"../../components/ErrorMessage\";import Loading from\"../../components/Loading\";import ReactMarkdown from\"react-markdown\";function SingleNote(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var dispatch=useDispatch();var noteUpdate=useSelector(function(state){return state.noteUpdate;});var loading=noteUpdate.loading,error=noteUpdate.error;var noteDelete=useSelector(function(state){return state.noteDelete;});var loadingDelete=noteDelete.loading,errorDelete=noteDelete.error;var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure?\")){dispatch(deleteNoteAction(id));}history.push(\"/mynotes\");};useEffect(function(){var fetching=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/notes/\".concat(match.params.id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTitle(data.title);setContent(data.content);setCategory(data.category);setDate(data.updatedAt);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetching(){return _ref2.apply(this,arguments);};}();fetching();},[match.params.id,date]);var resetHandler=function resetHandler(){setTitle(\"\");setCategory(\"\");setContent(\"\");};var updateHandler=function updateHandler(e){e.preventDefault();dispatch(updateNoteAction(match.params.id,title,content,category));if(!title||!content||!category)return;resetHandler();history.push(\"/mynotes\");};return/*#__PURE__*/_jsx(MainScreen,{title:\"Edit Note\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Edit your Note\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:updateHandler,children:[loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"title\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"title\",placeholder:\"Enter the title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Content\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",placeholder:\"Enter the content\",rows:4,value:content,onChange:function onChange(e){return setContent(e.target.value);}})]}),content&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Note Preview\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ReactMarkdown,{children:content})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"content\",placeholder:\"Enter the Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),loading&&/*#__PURE__*/_jsx(Loading,{size:50}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Update Note\"}),/*#__PURE__*/_jsx(Button,{className:\"mx-2\",variant:\"danger\",onClick:function onClick(){return deleteHandler(match.params.id);},children:\"Delete Note\"})]})}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"text-muted\",children:[\"Updated on - \",date.substring(0,10)]})]})});}export default SingleNote;","map":{"version":3,"sources":["/home/shashikant/Desktop/notezipper-master/frontend/src/screens/SingleNote/SingleNote.js"],"names":["React","useEffect","useState","MainScreen","axios","Button","Card","Form","useDispatch","useSelector","deleteNoteAction","updateNoteAction","ErrorMessage","Loading","ReactMarkdown","SingleNote","match","history","title","setTitle","content","setContent","category","setCategory","date","setDate","dispatch","noteUpdate","state","loading","error","noteDelete","loadingDelete","errorDelete","deleteHandler","id","window","confirm","push","fetching","get","params","data","updatedAt","resetHandler","updateHandler","e","preventDefault","target","value","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport MainScreen from \"../../components/MainScreen\";\nimport axios from \"axios\";\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteNoteAction, updateNoteAction } from \"../../actions/notesActions\";\nimport ErrorMessage from \"../../components/ErrorMessage\";\nimport Loading from \"../../components/Loading\";\nimport ReactMarkdown from \"react-markdown\";\n\nfunction SingleNote({ match, history }) {\n  const [title, setTitle] = useState();\n  const [content, setContent] = useState();\n  const [category, setCategory] = useState();\n  const [date, setDate] = useState(\"\");\n\n  const dispatch = useDispatch();\n\n  const noteUpdate = useSelector((state) => state.noteUpdate);\n  const { loading, error } = noteUpdate;\n\n  const noteDelete = useSelector((state) => state.noteDelete);\n  const { loading: loadingDelete, error: errorDelete } = noteDelete;\n\n  const deleteHandler = (id) => {\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deleteNoteAction(id));\n    }\n    history.push(\"/mynotes\");\n  };\n\n  useEffect(() => {\n    const fetching = async () => {\n      const { data } = await axios.get(`/api/notes/${match.params.id}`);\n\n      setTitle(data.title);\n      setContent(data.content);\n      setCategory(data.category);\n      setDate(data.updatedAt);\n    };\n\n    fetching();\n  }, [match.params.id, date]);\n\n  const resetHandler = () => {\n    setTitle(\"\");\n    setCategory(\"\");\n    setContent(\"\");\n  };\n\n  const updateHandler = (e) => {\n    e.preventDefault();\n    dispatch(updateNoteAction(match.params.id, title, content, category));\n    if (!title || !content || !category) return;\n\n    resetHandler();\n    history.push(\"/mynotes\");\n  };\n\n  return (\n    <MainScreen title=\"Edit Note\">\n      <Card>\n        <Card.Header>Edit your Note</Card.Header>\n        <Card.Body>\n          <Form onSubmit={updateHandler}>\n            {loadingDelete && <Loading />}\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\n            {errorDelete && (\n              <ErrorMessage variant=\"danger\">{errorDelete}</ErrorMessage>\n            )}\n            <Form.Group controlId=\"title\">\n              <Form.Label>Title</Form.Label>\n              <Form.Control\n                type=\"title\"\n                placeholder=\"Enter the title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Content</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                placeholder=\"Enter the content\"\n                rows={4}\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n              />\n            </Form.Group>\n            {content && (\n              <Card>\n                <Card.Header>Note Preview</Card.Header>\n                <Card.Body>\n                  <ReactMarkdown>{content}</ReactMarkdown>\n                </Card.Body>\n              </Card>\n            )}\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Category</Form.Label>\n              <Form.Control\n                type=\"content\"\n                placeholder=\"Enter the Category\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              />\n            </Form.Group>\n            {loading && <Loading size={50} />}\n            <Button variant=\"primary\" type=\"submit\">\n              Update Note\n            </Button>\n            <Button\n              className=\"mx-2\"\n              variant=\"danger\"\n              onClick={() => deleteHandler(match.params.id)}\n            >\n              Delete Note\n            </Button>\n          </Form>\n        </Card.Body>\n\n        <Card.Footer className=\"text-muted\">\n          Updated on - {date.substring(0, 10)}\n        </Card.Footer>\n      </Card>\n    </MainScreen>\n  );\n}\n\nexport default SingleNote;\n"]},"metadata":{},"sourceType":"module"}